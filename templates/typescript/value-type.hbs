export class {{typeName}} {
  private readonly _v: {{typeExp.type}}; 
  constructor(v : {{typeExp.type}}) {
    if ({{> value-type-isa typeExp }}) {
      throw new Error(`Not a {{typeExp.type}}`)
    }
    this._v = v;
  }

  static schema = S.makeSchema({{{to-schema typeExp}}})

  // this function is strictly useless if we are doing instanceof typing.
  // instead what we are looking for is checking for constructible data...
  static isa(v : any) : boolean {
    return v instanceof {{typeName}};
  }

  static fromJSON( v : any) : {{typeName}} {
    if ({{> value-type-isa typeExp }}) {
      return new {{typeName}}(v);
    } else {
      throw new Error(`Not a {{typeExp.type}}`);
    }
  }

  valueOf() : {{typeExp.type}} {
    return this._v;
  }

  toString() : string {
    return this._v;
  }

  toJSON() : any {
    return this._v;
  }
}

